8/15
 
スキルチェック  
Bランク　1問  
 
-------------------------------------------
道路点検  
・マス付きの正方形地図の長さが与えられる  
・下記の表の通り、地図の各マスに数字が入ってる  
・上下左右の道を参考し、不具合のあるマスを1〜6の中から適切に整備  
・整備後の全体地図を出力  


マスに入る数字と道路形状
| symbol | mean |
|:-----------:|:------------:|
| 0 | 何もない |
| 1 | ─ (左と右) |
| 2 | │ (上と下) |
| 3 | └ (上と右) |
| 4 | ┌ (右と下) |
| 5 | ┐ (下と左) |
| 6 | ┘ (左と上) |
| 7 | 不具合 |
 
-------------------------------------------
 
```ruby
len = gets.to_i                                                # 地図の長さを取得
map = len.times.map{gets.chomp.chars}                          # 地図各マスの内容を取得

                                                               # 各方向に接続できる道路の種類(数字)
u_routes = [2,4,5]                                             # 上方向に接続可(│, ┌, ┐)
d_routes = [2,3,6]                                             # 下方向に接続可（│, └, ┘）
l_routes = [1,3,4]                                             # 左方向に接続可（─, └, ┌）
r_routes = [1,5,6]                                             # 右方向に接続可（─, ┐, ┘）

map.each_with_index do |h, x|                                  # 各マスを座標付きで確認していく
  h.each_with_index do |w, y|
    w = w.to_i                                                 # 現在のマスの内容を数字化
    up = map[x-1][y].to_i if x - 1 >= 0                        # 上下左右マスの内容を数字化
    down = map[x+1][y].to_i if x + 1 < len
    left = map[x][y-1].to_i if y - 1 >= 0
    right = map[x][y+1].to_i if y + 1 < len
                                                               # 各パターンが成立するかを判定
    lr = l_routes.include?(left) && r_routes.include?(right)   # ─
    ud = u_routes.include?(up) && d_routes.include?(down)      # │
    ur = u_routes.include?(up) && r_routes.include?(right)     # └
    rd = r_routes.include?(right) && d_routes.include?(down)   # ┌
    dl = d_routes.include?(down) && l_routes.include?(left)    # ┐
    lu = l_routes.include?(left) && u_routes.include?(up)      # ┘

   case w                                                      # 現在のマスを確認
   when 7                                                      # 不具合あった場合
     [lr,ud,ur,rd,dl,lu].each_with_index do |tf,idx|           # 6つのパターンから確認
       map[x][y] = idx + 1 if tf                               # 適用する場合、現在のマスをパターン番号に変更
     end
   end
   
  end
end
map.each{|x| puts x.join}                                      # 整備後の全体地図を出力
```
