9/2
 
スキルチェック  
Bランク　1問  
 
-------------------------------------------
掃除ロボ  
・ロボットの移動回数が与えられる  
・部屋の横縦幅が与えられる  
・部屋全体のマスの状態が下記の表のように与えられる  
・1マスに1移動回数を消耗  
・各マスは1回のみ通過  
・➡️⬇️⬅️⬆️の順で移動  
・移動回数内で掃除した汚れてるマス数を出力  
 
| symbol | mean |
|:-----------:|:------------:|
| # | 汚れてる |
| . | キレイ |
 
-------------------------------------------
 
```ruby
time = gets.to_i                                              # 掃除回数を取得
h, w = gets.split.map(&:to_i)                                 # 部屋の横縦幅を取得
room = h.times.map{gets.chomp.chars}                          # 各マスの状態を取得
blocks = []                                                   # ロボットが移動したマスを記録用

def chk(arr,limit)                                            # 移動上限達したかを確認する関数
  arr.flatten.size > limit
end

while blocks.flatten.size < time                              # 移動上限超えたら止まる
  row = room.shift                                            # top➡️通過
  blocks << row if row                                        # nilじゃない場合のみ実行
  break if chk(blocks,time)                                   # 上限超えたら止まる

  room.each { |x| blocks << x.pop if x }                      # right⬇️通過、空じゃない場合のみ抽出
  break if chk(blocks,time)                                   # 上限超えたら止まる

  row = room.pop                                              # bottom⬅️通過
  blocks << row.reverse if row                                # nilじゃない場合のみ実行
  break if chk(blocks,time)                                   # 上限超えたら止まる

  left = room.map { |x| x.shift if x }                        # left⬆️通過、空じゃない場合のみ抽出
  blocks << left.compact.reverse                              # 逆順に並び替えてから通過
  break if chk(blocks,time)                                   # 上限超えたら止まる
end
count = 0                                                     # 汚れたマス数を記録用

blocks.flatten.each_with_index do |block, idx|
  count += 1 if idx <= time - 1 && block=="#"                 # 移動上限まで通過した汚れたマスを集計
end
puts count                                                    # 通過した汚れたマス数を出力
```
