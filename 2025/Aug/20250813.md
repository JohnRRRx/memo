8/13
  
スキルチェック  
Bランク　1問  
  
-------------------------------------------
例の💣  
・地図の縦横幅が与えられる  
・地図の各マスが与えられる  
・下記表のように、地図が構成されている  
・地図にある全爆弾が同時に爆発  
・爆弾が壁を通ることはできない  
・その威力が全部の敵を仕留められる場合YES、そうでない場合NOと出力  
  
| symbol | mean |
|:-----------:|:------------:|
| # | 壁 |
| . | 通路 |
| X | 敵 |
| 1〜9 | 爆弾の場所とその威力 |
  
-------------------------------------------
  
```ruby
h,w = gets.split.map(&:to_i)                               # 地図の縦横幅を取得
map = h.times.map{gets.chomp.chars}                        # 地図全体を取得

enemies = []                                               # 敵座標記録用
blast = []                                                 # 爆風座標記録用

map.each_with_index do |cols, x|                           # 地図の各マスを確認していく
  cols.each_with_index do |row, y|
    enemies << [x,y] if row == "X"                         # 敵の座標を記録
   
    up = map[x-1][y] if x-1 >= 0                           # 上下左右のマスを定義
    down = map[x + 1][y] if x+1 < h
    left = map[x][y - 1] if y-1 >= 0
    right = map[x][y + 1] if y+1 < w
    power = row.to_i                                       # 爆弾威力を定義
   
    if row.match?(/\d/)                                    # 爆弾の場合(壁判定は最初の1マスのみ)
      ex_U = (x-power..x).to_a.keep_if { |n| n >= 0 }      # 上方向に爆風が届く座標を記録
      ex_U.each {|u| blast << [u,y] if up != "#" }
   
      ex_D = (x..x+power).to_a.keep_if { |n| n < h }       # 下方向に爆風が届く座標を記録
      ex_D.each {|d| blast << [d,y] if down != "#" }
   
      ex_L = (y-power..y).to_a.keep_if { |n| n >= 0 }      # 左方向に爆風が届く座標を記録
      ex_L.each {|l| blast << [x,l] if left != "#" }

      ex_R = (y..y+power).to_a.keep_if { |n| n < w }       # 右方向に爆風が届く座標を記録
      ex_R.each {|r| blast << [x,r] if right != "#" }
    end
  end
end

puts (blast&enemies).size == enemies.size ? "YES" : "NO"   # 爆風が全部の敵届く場合YES、そうでない場合NOと出力
```

***

### 補足  

##### match?  

| 操作                   | 判定対象 | 戻り値     | 動き                                        |
|------------------------|----------|------------|---------------------------------------------|
| `"abc".match?(/a/)`    | 文字列   | true/false | 正規表現にマッチするかどうかだけ調べる       |

```ruby
例:

"hello".match?(/h/)   #=> true
"hello".match?(/z/)   #=> false
```

<br>
  
##### keep_if  

| 操作                         | 対象     | 動き                                        |
|------------------------------|----------|---------------------------------------------|
| `[1,2,3].keep_if { ... }`    | 配列     | ブロックがtrueの要素だけ残して他は削除する(元の配列を上書きする)  |
```ruby
例:

nums = [1, 2, 3, 4, 5]

# 偶数だけ残す
nums.keep_if { |n| n.even? }
p nums   #=> [2, 4]

# 3以上の数だけ残す
nums.keep_if { |n| n >= 3 }
p nums   #=> [4]
```
