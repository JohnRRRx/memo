8/30
 
スキルチェック  
Bランク　1問  
 
-------------------------------------------
チャット履歴  
・全社人数、グループ数、メッセージ数が与えられる  
・グループがある場合、グループ人数、グループリストが与えられる  
・メッセージの詳細は、送信元、送信先形式、送信先、メッセージ内容が一括で与えられる  
・下記の表のようにメッセージが履歴に残る  
・個々人の閲覧できるメッセージを、個人単位で--区切って出力  
 
| type | mean |
|:-----------:|:------------:|
| 0 | 個人宛 |
| 1 | グループ宛 |

| type | save |
|:-----------:|:------------:|
| 個人 ➡️ 個人 | お互いの履歴に残る |
| 個人 ➡️ グループ | 該当グループに所属全員の履歴に残る |
 
-------------------------------------------
 
```ruby
people, g_amounts, m_amounts = gets.split.map(&:to_i)         # 全社人数、グループ数、メッセージ数を取得
each_one = people.times.map{|x| [] }                          # 人数分、各自のチャット履歴を初期化
groups = []                                                   # チャットグループの情報を記録用
if g_amounts > 0                                              # グループがある場合
  g_amounts.times do                                          # グループある分、各グループの
    details = gets.split.map(&:to_i)                          # 情報を取得
    details.delete_at(0)                                      # 人数は必要ないので削除
    groups << details                                         # グループに入ってる社員を記録
  end
end

messages = m_amounts.times.map{gets.split}                    # メッセージある分、詳細情報を取得
messages.each_with_index do |elements, idx|                   # 各メッセージを分析していく
  from = elements[0].to_i                                     # 送信元を定義
  type = elements[1].to_i                                     # 送信先の形式を定義
  name = elements[2].to_i                                     # 送信先の名前を定義
  message = elements[3]                                       # 送信内容を定義
  if type == 0                                                # 送信形式が個人宛の場合
    each_one[from - 1] << message                             # 送信元にメッセージを残す
    each_one[name - 1] << message                             # 送信先にメッセージを残す
  elsif type == 1                                             # 送信形式がグループ宛の場合
    groups[name - 1].each {|to| each_one[to - 1] << message}  # 該当グループにいる全員にメッセージを残す
  end
end

each_one.each_with_index do |m,idx|                           # 各自が閲覧できるメッセージを出力
  puts m
  puts "--" if idx != each_one.size - 1                       # 最後の人以外は--で区切る
end
```

***
 
### 補足  

##### *
| 対象           | 役割                                         |
|----------------|--------------------------------------------------|
| 配列 | 一括取得(JavaScriptの...と似たような機能) |

下記のようにdelete_at使わず、簡潔にできる

```ruby
  g_amounts.times do                
    count, *member_list = gets.split.map(&:to_i)
    groups << member_list
  end
```
