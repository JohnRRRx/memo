8/12
 
スキルチェック  
Bランク　1問  
 
-------------------------------------------
擬似パズル  
・盤面の縦幅、横幅、マスの色数が与えられる  
・盤面にある各マスの色が与えられる  
・同じ色のマスが2個以上隣接したら消せる(上下左右のみ、斜めはなし)  
・消したらマスが#になる  
・色マスが重力で落ち、#マスが上に上がっていく  
・処理後の盤面を出力  
 
-------------------------------------------
 
```ruby
cols,rows,color_amounts = gets.split.map(&:to_i)   # 盤面の縦幅、横幅、マスの色数を取得
all = cols.times.map{gets.split(" ")}              # 盤面にある各マスの色を取得

remove = []                                        # 全消去対象の座標を記録用
all.each_with_index do |h,x|                       # 各行を確認していく
  coord = []                                       # 座標を記録用
  h.each_with_index do |w,y|                       # 各マスを確認していく
    up = all[x-1][y] if x-1 >= 0                   # 上下左右のマスを定義
    down = all[x+1][y] if x+1 < cols
    left = all[x][y-1] if y-1 >= 0
    right = all[x][y+1] if y+1 < rows

    coord << [x-1,y] if up == w                    # 上下左右のマスが同じ色の場合、その座標を記録
    coord << [x+1,y] if down == w
    coord << [x,y-1] if left == w
    coord << [x,y+1] if right == w    
  end
  remove << coord                                  # 同じ色が隣接した座標を記録
end

remove.flatten(1).each {|x,y| all[x][y] = "#"}     # 全色を一気に消去し、#に変換

all = all.transpose                                # 変換後の盤面を横縦反転

all.each_with_index do |x, idx|                    # 盤面に重力効果を適用させていく
  amounts = x.count("#")                           # #マスを数える
  if amounts != cols                               # 色マスと#マスが並行している場合のみ実行
    all[idx].delete("#")                           # 同じ行にある#マスを全削除
    amounts.times do                               # #数の分先頭に追加
      all[idx].unshift("#")
    end
  end
end

all.transpose.each {|x | puts x.join(" ") }        # 横縦を戻し、処理後の盤面を出力  
```
***
 
### 補足  

##### flatten()



| 指定        | 意味                                   | 動作例（a = [1, [2, 3, [4], 5]]）          | 結果                     |
|-------------|----------------------------------------|---------------------------------------------|--------------------------|
| 0           | 0層（外枠）だけ → 何もしない           | `a.flatten(0)`                              | `[1, [2, 3, [4], 5]]`    |
| 1           | 外枠の1つ内側（1層目）を潰す           | `a.flatten(1)`                              | `[1, 2, 3, [4], 5]`      |
| 2           | 外枠から2層目まで潰す                  | `a.flatten(2)`                              | `[1, 2, 3, 4, 5]`        |
| （指定なし）| 全ての層を潰す                  | `a.flatten`                                 | `[1, 2, 3, 4, 5]`        |
