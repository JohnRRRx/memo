11/14
 
スキルチェック  
Bランク　1問  
 
-------------------------------------------
各層の中央値を求める  
・1つの配列が与えられる  
・配列内の要素数が与えられる  
・初回はソードせず、配列内各組み合わせの中央値を取得(下記の例を参照)  
・組み合わせの要素数が奇数の場合、中央値はそのまま真ん中の要素、偶数の場合、真ん中にある2要素の平均を中央値とする  
・取得した中央値を一度小〜大順に並び替え、もう一度同じ方法で中央値を取得  
・最終的な中央値を出力(整数の場合小数点以降は出力せず、小数点ある場合そのまま出力)  
```
例：　arr = [1, 2, 3]
```
| 組み合わせ | 中央値 |
|:-----------:|:------------:|
| 1 | 1 |
| 1, 2 | 1.5 |
| 1, 2, 3 | 2 |
| 2 | 2 |
| 2, 3 | 2.5 |
| 2, 3, 4 | 3 |
| 3 | 3 |
| 3, 4 | 3.5 |
| 4 | 4 |
 
-------------------------------------------
 
```ruby
amounts = gets.to_i                                                                               # 配列内の要素数を取得
arr = gets.split(" ").map(&:to_f)                                                                 # 配列内の各要素をfloatとして取得
from = (0..amounts-1).to_a                                                                        # 範囲の先頭を配列化
to = (0..amounts-1).to_a                                                                          # 範囲の末尾を配列化
result = []                                                                                       # 最終段階の中央値を記録

from.each do |x|                                                                                  # 全可能性の範囲を確認
  to.each do |y|
    range = (x..y).to_a                                                                           # 範囲をindex化
    total = []                                                                                    # 中央値を記録
   
    range.each {|x| total << arr[x]}                                                              # 各範囲の中央値を取り出す
    total = total.sort                                                                            # 中央値を小〜大順に並び替える
   
    if total.size != 0                                                                            # 中央値があれば
      if (total.size).even?                                                                       # 要素数が偶数の場合
        center = (total.size)/2                                                                   # 中央要素数を算出
        result << ([total[center-1],total[center]].sum) / 2                                       # 中央にある2要素の平均値を中央値として記録
      else                                                                                        # 要素数が奇数の場合
        center = (total.size)/2                                                                   # 中央要素数を算出
        result << total[center]                                                                   # 該当要素の値を中央値として記録
      end
    end
  end
end

result = result.flatten.sort                                                                      # 配列を崩し、全部の要素が1次元配列の中で小〜大順に並び替える

center = (result.size) / 2                                                                        # 中央要素数を算出
last = (result.size).even? ? ([result[center-1],result[center]].sum) / 2 : result[center]         # 中央要素数が偶数の場合、真ん中2要素の平均値を、奇数の場合中央要素の値を最後の中央値として記録
puts last == last.to_i ? last.to_i : last                                                         # 最後の中央値が整数の場合、小数点後を略し、そうでない場合、そのまま出力
```
