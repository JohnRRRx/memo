7/21
  
スキルチェック  
Bランク　1問  
  
-------------------------------------------
電車の遮断機  
・電車の本数、遮断機の下がる秒数が与えられる  
・電車の通過時刻が与えられる  
・電車が通過する数秒前〜遮断機が下がる  
・遮断機は電車が通った際に一度上がる  
・が、次の電車が通過前に、遮断機が下がるタイミングと被った場合、遮断機は上がらずにそのまま  
・遮断機が下がっている最大連続時間を出力  
  
-------------------------------------------
  
```ruby
amounts, stop = gets.split.map(&:to_i)                  # 電車の本数、遮断機が下がる秒数を取得
through = amounts.times.map { gets.to_i }               # 電車が通過する時刻リストを取得
periods = through.map { |t| [t - stop, t] }             # 遮断機の下がる時間区間を [開始, 終了) でリストにする

max_seconds = 0                                         # 最長遮断時間を記録用
current_start, current_end = periods[0]                 # 最初の遮断区間を現在の区間としてスタート

(1...periods.size).each do |i|                          # 2本目の電車から順に処理
  next_start, next_end = periods[i]                     # 次の遮断区間を取り出す

  if next_start <= current_end                          # 次の電車の遮断開始が今の遮断時間と被った場合
    current_end = next_end                              # 遮断時間を繋げる
  else                                                  # 遮断時間が被ってない場合
    duration = current_end - current_start              # 遮断時間を計算
    max_seconds = [max_seconds, duration].max           # 最大値を更新
    current_start = next_start                          # 新しい遮断区間に更新
    current_end = next_end
  end
end

duration = current_end - current_start                  # 最後遮断区間を確認
max_seconds = [max_seconds, duration].max               # 最長遮断時間を定義

puts max_seconds                                        # 最長遮断時間を出力
```
