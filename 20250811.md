8/11
  
スキルチェック  
Bランク　1問  
  
-------------------------------------------
一部変更  
・正方形方眼紙の長さが与えられる  
・各マス書かれてる数字(0か1)が与えられる  
・一部の正方形を角度で動かして上書きしたい  
・変更する正方形の先頭マスの座標、長さ、角度(0,90,180,270,360)が与えられる  
・処理後の方眼紙全体を出力  
  
-------------------------------------------
  
```ruby
len = gets.to_i                                      # 方眼紙の長さを取得
all = len.times.map { gets.split.map(&:to_i) }       # 各マスの数字を取得
x, y, range, angle = gets.split.map(&:to_i)          # 変更する正方形の先頭マスの座標、長さ、角度を取得

x -= 1                                               # 座標をindex化
y -= 1

coord = []                                           # 回転対象部分の各座標記録用
values = []                                          # 回転対象部分の数値記録用
(x...x + range).each do |h|                          # 変更する正方形の各行を抽出していく
  value = []                                         # 各マスの数字を記録用
  (y...y + range).each do |w|                        # 各マスを抽出
    coord << [h, w]                                  # 座標を記録
    value << all[h][w]                               # 数字を記録
  end
  values << value                                    # 数字をまとめる
end


case angle                                           # 角度によって正方形を動かす
when 90
  rotated = values.transpose.map(&:reverse).flatten
when 180
  rotated = values.reverse.map(&:reverse).flatten
when 270
  rotated = values.transpose.reverse.flatten
when 0, 360
  rotated = values.flatten
end

rotated.each_with_index do |val, idx|                # 角度変更後の正方形を元の方眼紙部分に上書き
  h, w = coord[idx]
  all[h][w] = val
end

all.each { |row| puts row.join(" ") }                # 変更後の方眼紙全体を出力
```



***
 
### 補足  

##### reverse   

| 操作                           | 反転方向 | 回転方向   | 動き                               |
|--------------------------------|----------|------------|------------------------------------|
| `transpose.map(&:reverse)`     | 左右反転 | 時計回り↩️90° | 転置後、各行を左右反転             |
| `transpose.reverse`            | 上下反転 | 反時計回り↪️90° | 転置後、行の順を上下反転           |
